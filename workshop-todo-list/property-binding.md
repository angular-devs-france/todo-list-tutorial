# #6: üì• Property binding

Nous avons maintenant notre composant input-button-unit, mais il ne fait pas grand-chose. Nous voulons lui donner vie.

Ajoutons un √©l√©ment HTML input et faisons en sorte que son texte de contr√¥le refl√®te la valeur de la propri√©t√© `title`.

Nous allons revenir √† l'√©tat du composant avant nos exp√©riences avec ses m√©thodes:

{% code title="src/app/input-button-unit/input-button-unit.component.ts" %}
```typescript
import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';

@Component({
  selector: 'app-input-button-unit',
  standalone: true,
  imports: [CommonModule],
  templateUrl: './input-button-unit.component.html',
  styleUrls: ['./input-button-unit.component.scss']
})    
export class InputButtonUnitComponent {
  title = 'Hello World';           

  constructor() { }                     
}
```
{% endcode %}

Ajoutons un √©l√©ment HTML input et un bouton au mod√®le:

{% code title="src/app/input-button-unit/input-button-unit.component.html" %}
```markup
  <p>
    input-button-unit works!
    The title is: {{ title }}
  </p>

  <input>
  <button>Save</button>
```
{% endcode %}

Rappel: Nous utilisons l'interpolation pour pr√©senter la valeur de la propri√©t√© `title`: `{{ title }}`. Angular pr√©sente ensuite la valeur de `title` chaque fois que notre composant `app-input-button-unit` est affich√©.

Comment pouvons-nous afficher la valeur de la propri√©t√© `title` dans l'√©l√©ment HTML input lui-m√™me?

Chaque √©l√©ment `input` a un attribut appel√© `value`, qui contient la string qui est affich√©e √† l'int√©rieur de la zone `input`. En HTML, nous pouvons passer une string directement √† l'attribut `value` de l'√©l√©ment:

{% code title="src/app/input-button-unit/input-button-unit.component.html" %}
```markup
<input value="Hello World">
```
{% endcode %}

Mais nous perdons la liaison dynamique entre les propri√©t√©s dans le contr√¥leur et le mod√®le.

Comme nous l'avons vu, Angular nous permet de lier les propri√©t√©s au mod√®le facilement avec l'interpolation. 
Maintenant, nous allons voir comment lier une **propri√©t√© d'√©l√©ment** √† une propri√©t√© de classe. 
Nous entourons la propri√©t√© d'√©l√©ment voulue avec des crochets et lui passons le membre de la classe :

{% code title="src/app/input-button-unit/input-button-unit.component.html" %}
```markup
<input [value]="title">
```
{% endcode %}

Essayons et voyons le r√©sultat dans le navigateur !

## a# Faire du binding avec des m√©thodes

Les expressions auxquelles nous pouvons nous lier dans le mod√®le ne se limitent pas aux propri√©t√©s de classe. Elles peuvent √™tre un appel de m√©thode ou presque toute autre expression JavaScript valide.

![lab-icon](<../assets/lab (14).jpg>) **Playground**: Par exemple, lier la valeur d'entr√©e √† un appel de m√©thode qui renvoie une valeur. Tout d'abord, ajoutons la m√©thode `generateTitle` n'importe o√π √† l'int√©rieur de la classe, mais pas √† l'int√©rieur de l'une de ses m√©thodes.

{% code title="src/app/input-button-unit/input-button-unit.component.ts" %}
```typescript
generateTitle(): string {
  return 'This title was generated by a method.';
}
```
{% endcode %}

Dans le mod√®le, remplacez les appels du titre par l'appel de la m√©thode (n'oubliez pas les parenth√®ses !) :

{% code title="src/app/input-button-unit/input-button-unit.component.html" %}
```markup
  {{ generateTitle() }}

  <input [value]="generateTitle()">
```
{% endcode %}

## b# Changement de Detection

Angular poss√®de un m√©canisme de d√©tection des changements tr√®s efficace. Il recherche les liaisons dans les mod√®les des composants, puis met √† jour la valeur chaque fois que l'expression li√©e est modifi√©e.

![lab-icon](../assets/lab.jpg) **Playground**: Pour le voir, changeons la valeur du titre apr√®s quelques secondes et voyons ce qui se passe. Appelez la fonction `setTimeout` √† l'int√©rieur du constructeur:

{% code title="src/app/input-button-unit/input-button-unit.component.ts" %}
```typescript
constructor() {
  setTimeout(() => {
    this.title = 'This is not the title you are looking for';
  }, 3000);
}
```
{% endcode %}

`setTimeout` est une fonction JavaScript. Son premier param√®tre est ce que nous voulons qu'il se passe - une fonction de notre choix. Le deuxi√®me param√®tre est le d√©lai que nous voulons, en millisecondes. Dans cet exemple, nous passons une **fonction fl√©ch√©e** qui d√©finit la valeur de `this.title` au bout de 3 secondes.

## c# Resources

[Angular Guide - Template Property Binding](https://angular.io/guide/template-syntax#property-binding--property-)

## d# Note sur l'acc√®s au DOM

En utilisant le JavaScript classique, nous pouvons ins√©rer la valeur dans l'entr√©e via ses propri√©t√©s. Nous allons r√©cup√©rer l'√©l√©ment du DOM et assigner la valeur du membre `title` √† la propri√©t√© `value` de l'√©l√©ment.

{% code title="code for example" %}
```typescript
let inputElement = document.getElementById('my-input');
inputElement.value = this.title;
```
{% endcode %}

En JavaScript, nous trouvons l'√©l√©ment `input` dans le DOM par son id, puis nous d√©finissons sa propri√©t√© `value` sur la valeur de la propri√©t√© title. Nous devons ensuite ajouter l'id √† l'√©l√©ment `input` :

{% code title="code for example" %}
```markup
<input id="my-input">
```
{% endcode %}

Cela fonctionnera dans le navigateur.

Cependant, **c'est fortement d√©conseill√© dans Angular. Vous ne devriez jamais acc√©der au DOM directement !** C'est parce que vous pouvez attribuer diff√©rents rendus √† Angular et ex√©cuter l'application sur diff√©rentes plates-formes. Ils peuvent √™tre des rendus pour mobile, bureau, ou m√™me un robot. Ces plateformes n'auront pas d'objet `document` √† partir duquel vous pouvez manipuler le r√©sultat !

{% hint style="info" %}
üíæ **Pusher votre code sur GitHub**

Committez tous vos changements en ex√©cutant cette commande dans votre r√©pertoire de projet.

```bash
git add -A && git commit -m "votre message de commit"
```

Puis pusher vos changements sur GitHub en ex√©cutant cette commande dans votre r√©pertoire de projet.

```
git push
```
{% endhint %}
